<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Calendar App</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root {
      --morning-color: #fff3cd;
      --noon-color: #ffe5d0;
      --night-color: #cce5ff;
      --weekend-bg: #f8f9fa;
      --current-time-color: #dc3545;
    }

    body {
      font-family: 'Arial', sans-serif;
      margin: 0;
      padding: 0;
      block-size: 100vh;
      overflow: hidden;
    }
.highlight-week {
  background-color: rgba(255, 0, 0, 0.2); /* Adjust the color and opacity as needed */
}
    .login-container {
      max-inline-size: 400px;
      margin: 100px auto;
      padding: 20px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      border-radius: 8px;
    }

    .main-container {
      display: none;
      block-size: 100vh;
      overflow: hidden;
    }

    .calendar-container {
      display: flex;
      block-size: calc(100vh - 20px);
      margin: 10px;
    }

    .vertical-calendar {
      inline-size: 75%;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      margin-inline-end: 10px;
    }

    .calendar-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      background: #f8f9fa;
      border-radius: 5px;
      margin-block-end: 10px;
    }

    .calendar-body {
      flex-grow: 1;
      overflow-y: auto;
    }

    .calendar-row {
      display: flex;
      block-size: 120px;
      margin-block-end: 5px;
    }

    .date-cell {
      inline-size: 120px;
      background: #fff;
      border: 1px solid #dee2e6;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      font-weight: bold;
    }

    .tasks-container {
      display: flex;
      flex-grow: 1;
      margin-inline-start: 5px;
    }

    .task-column {
      flex: 1;
      padding: 5px;
      border: 1px solid #dee2e6;
    }

    .task-morning {
      background-color: var(--morning-color);
    }

    .task-noon {
      background-color: var(--noon-color);
    }

    .task-night {
      background-color: var(--night-color);
    }

    .task-input {
      inline-size: 100%;
      block-size: 100%;
      border: none;
      background: transparent;
      resize: none;
      padding: 5px;
    }

    .weekend {
      background-color: var(--weekend-bg);
    }

    .today {
      border: 2px solid #0d6efd !important;
    }

    .current-time-indicator {
      position: absolute;
      block-size: 2px;
      background-color: var(--current-time-color);
      pointer-events: none;
    }

    .side-panel {
      inline-size: 25%;
      display: flex;
      flex-direction: column;
      background: #fff;
      border-radius: 5px;
      padding: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .mini-calendar {
      margin-block-end: 20px;
    }

    .mini-calendar table {
      inline-size: 100%;
      border-collapse: collapse;
    }

    .mini-calendar th,
    .mini-calendar td {
      text-align: center;
      padding: 5px;
      border: 1px solid #dee2e6;
    }

    .projects-section {
      flex-grow: 1;
      overflow-y: auto;
    }

    .project-card {
      background: #fff;
      border: 1px solid #dee2e6;
      border-radius: 5px;
      padding: 10px;
      margin-block-end: 10px;
    }

    .project-actions {
      display: flex;
      justify-content: flex-end;
      gap: 5px;
    }

    .btn-nav {
      padding: 5px 15px;
      border: none;
      border-radius: 5px;
      background: #0d6efd;
      color: white;
      cursor: pointer;
    }

    .btn-nav:hover {
      background: #0b5ed7;
    }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      inset-block-start: 0;
      inset-inline-start: 0;
      inline-size: 100%;
      block-size: 100%;
      background: rgba(0,0,0,0.5);
    }

    .modal-content {
      background: #fff;
      inline-size: 400px;
      margin: 100px auto;
      padding: 20px;
      border-radius: 5px;
    }

    /* Scrollbar styling */
    ::-webkit-scrollbar {
      inline-size: 8px;
    }

    ::-webkit-scrollbar-track {
      background: #f1f1f1;
    }

    ::-webkit-scrollbar-thumb {
      background: #888;
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: #555;
    }
  </style>
</head>
<body>
<!-- Login/Signup Form -->
<div class="login-container" id="loginForm">
  <h2 class="text-center mb-4">Login</h2>
  <form id="authForm">
    <div class="mb-3">
      <input type="text" class="form-control" id="username" placeholder="Username" required>
    </div>
    <div class="mb-3">
      <input type="password" class="form-control" id="password" placeholder="Password" required>
    </div>
    <button type="submit" class="btn btn-primary w-100" id="loginBtn">Login</button>
    <p class="text-center mt-3">
      <a href="#" id="toggleAuth">Switch to Signup</a>
    </p>
  </form>
</div>

<!-- Main Calendar Container -->
<div class="main-container" id="mainContainer">
  <div class="calendar-container">
    <!-- Vertical Calendar Section -->
    <div class="vertical-calendar">
      <div class="calendar-header">
        <button class="btn-nav" id="prevWeek">←</button>
        <h2 id="currentWeek">Current Week</h2>
        <button class="btn-nav" id="nextWeek">→</button>
      </div>
      <div class="calendar-body" id="calendarBody">
        <!-- Calendar rows will be dynamically inserted here -->
      </div>
    </div>

    <!-- Side Panel -->
    <div class="side-panel">
      <div class="mini-calendar" id="miniCalendar">
        <!-- Mini calendar will be dynamically inserted here -->
      </div>
      <div class="projects-section">
        <div class="d-flex justify-content-between align-items-center mb-3">
          <h3>Projects</h3>
          <button class="btn btn-primary btn-sm" id="addProjectBtn">Add Project</button>
        </div>
        <div id="projectsList">
          <!-- Projects will be dynamically inserted here -->
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Project Modal -->
<div class="modal" id="projectModal">
  <div class="modal-content">
    <h3 id="modalTitle">Add Project</h3>
    <form id="projectForm">
      <div class="mb-3">
        <input type="text" class="form-control" id="projectName" placeholder="Project Name" required>
      </div>
      <div class="mb-3">
        <input type="date" class="form-control" id="projectDeadline" required>
      </div>
      <div class="mb-3">
        <textarea class="form-control" id="projectContent" placeholder="Project Description" rows="3"></textarea>
      </div>
      <div class="d-flex justify-content-end gap-2">
        <button type="button" class="btn btn-secondary" id="closeModal">Cancel</button>
        <button type="submit" class="btn btn-primary">Save</button>
      </div>
    </form>
  </div>
</div>
<script>
  // Calendar App JavaScript
  class CalendarApp {
    constructor() {
      this.currentDate = new Date();
      this.tasks = {};
      this.projects = [];
      this.isAuthenticated = false;
      this.initializeEventListeners();
      this.setupAuthenticationHandlers();
    }

    initializeEventListeners() {
      // Navigation buttons
      document.getElementById('prevWeek').addEventListener('click', () => this.navigateWeek(-1));
      document.getElementById('nextWeek').addEventListener('click', () => this.navigateWeek(1));

      // Project modal handlers
      document.getElementById('addProjectBtn').addEventListener('click', () => this.showProjectModal());
      document.getElementById('closeModal').addEventListener('click', () => this.hideProjectModal());
      document.getElementById('projectForm').addEventListener('submit', (e) => this.handleProjectSubmit(e));

      // Calendar interaction
      document.getElementById('calendarBody').addEventListener('input', (e) => {
        if (e.target.classList.contains('task-input')) {
          this.saveTask(e.target);
        }
      });

      // Auto-update current time indicator
      setInterval(() => this.updateCurrentTimeIndicator(), 60000);
    }

    setupAuthenticationHandlers() {
      document.getElementById('authForm').addEventListener('submit', (e) => this.handleAuth(e));
      document.getElementById('toggleAuth').addEventListener('click', (e) => this.toggleAuthMode(e));
    }

    handleAuth(e) {
      e.preventDefault();
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      // Simulate authentication (replace with actual authentication logic)
      if (username && password) {
        this.isAuthenticated = true;
        document.getElementById('loginForm').style.display = 'none';
        document.getElementById('mainContainer').style.display = 'block';
        this.initializeCalendar();
      }
    }

    toggleAuthMode(e) {
      e.preventDefault();
      const isLogin = document.getElementById('loginBtn').textContent === 'Login';
      document.getElementById('loginBtn').textContent = isLogin ? 'Sign Up' : 'Login';
      document.querySelector('h2').textContent = isLogin ? 'Sign Up' : 'Login';
      document.getElementById('toggleAuth').textContent = isLogin ? 'Switch to Login' : 'Switch to Signup';
    }

    initializeCalendar() {
      this.renderCalendar();
      this.renderMiniCalendar();
      this.loadSavedData();
      this.updateCurrentTimeIndicator();
    }

    renderCalendar() {
      const calendarBody = document.getElementById('calendarBody');
      calendarBody.innerHTML = '';

      const startOfWeek = this.getStartOfWeek(this.currentDate);
      document.getElementById('currentWeek').textContent =
              `${this.formatDate(startOfWeek)} - ${this.formatDate(this.addDays(startOfWeek, 6))}`;

      for (let i = 0; i < 7; i++) {
        const currentDate = this.addDays(startOfWeek, i);
        const row = this.createCalendarRow(currentDate);
        calendarBody.appendChild(row);
      }
    }

    createCalendarRow(date) {
      const row = document.createElement('div');
      row.className = 'calendar-row';

      const dateCell = document.createElement('div');
      dateCell.className = 'date-cell';
      if (this.isWeekend(date)) dateCell.classList.add('weekend');
      if (this.isToday(date)) dateCell.classList.add('today');

      dateCell.innerHTML = `
                    <div>${this.getDayName(date)}</div>
                    <div>${date.getDate()}</div>
                `;

      const tasksContainer = document.createElement('div');
      tasksContainer.className = 'tasks-container';

      const periods = ['morning', 'noon', 'night'];
      periods.forEach(period => {
        const taskColumn = document.createElement('div');
        taskColumn.className = `task-column task-${period}`;

        const textarea = document.createElement('textarea');
        textarea.className = 'task-input';
        textarea.setAttribute('data-date', this.formatDate(date));
        textarea.setAttribute('data-period', period);
        textarea.value = this.getTaskValue(date, period);

        taskColumn.appendChild(textarea);
        tasksContainer.appendChild(taskColumn);
      });

      row.appendChild(dateCell);
      row.appendChild(tasksContainer);
      return row;
    }

    renderMiniCalendar() {
      const miniCalendar = document.getElementById('miniCalendar');
      let html = '<table><thead><tr>';

      // Add headers for days of the week
      const daysOfWeek = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];
      daysOfWeek.forEach(day => {
        html += `<th>${day}</th>`;
      });
      html += '</tr></thead><tbody>';

      const now = new Date();
      const firstDay = new Date(now.getFullYear(), now.getMonth(), 1);
      const lastDay = new Date(now.getFullYear(), now.getMonth() + 1, 0);
      let date = 1;

      for (let i = 0; i < 6; i++) {
        html += '<tr>';
        for (let j = 0; j < 7; j++) {
          if (i === 0 && j < firstDay.getDay()) {
            html += '<td></td>';
          } else if (date > lastDay.getDate()) {
            break;
          } else {
            const dateStr = `${now.getFullYear()}-${now.getMonth() + 1}-${date}`;
            html += `<td data-date="${dateStr}">${date}</td>`;
            date++;
          }
        }
        html += '</tr>';
        if (date > lastDay.getDate()) break;
      }

      html += '</tbody></table>';
      miniCalendar.innerHTML = html;

      highlightCurrentWeek();
    }

    showProjectModal() {
      document.getElementById('projectModal').style.display = 'block';
    }

    hideProjectModal() {
      document.getElementById('projectModal').style.display = 'none';
    }

    handleProjectSubmit(e) {
      e.preventDefault();
      const projectData = {
        id: Date.now(),
        name: document.getElementById('projectName').value,
        deadline: document.getElementById('projectDeadline').value,
        description: document.getElementById('projectContent').value
      };

      this.projects.push(projectData);
      this.renderProjects();
      this.hideProjectModal();
      e.target.reset();
    }

    renderProjects() {
      const projectsList = document.getElementById('projectsList');
      projectsList.innerHTML = this.projects.map(project => `
                    <div class="project-card">
                        <h4>${project.name}</h4>
                        <p>Deadline: ${project.deadline}</p>
                        <p>${project.description}</p>
                        <div class="project-actions">
                            <button class="btn btn-sm btn-outline-primary" onclick="calendar.editProject(${project.id})">Edit</button>
                            <button class="btn btn-sm btn-outline-danger" onclick="calendar.deleteProject(${project.id})">Delete</button>
                        </div>
                    </div>
                `).join('');
    }

    // Utility functions
    getStartOfWeek(date) {
      const result = new Date(date);
      result.setDate(result.getDate() - result.getDay());
      return result;
    }

    addDays(date, days) {
      const result = new Date(date);
      result.setDate(result.getDate() + days);
      return result;
    }

    formatDate(date) {
      return date.toISOString().split('T')[0];
    }

    isWeekend(date) {
      return date.getDay() === 0 || date.getDay() === 6;
    }

    isToday(date) {
      const today = new Date();
      return date.getDate() === today.getDate() &&
              date.getMonth() === today.getMonth() &&
              date.getFullYear() === today.getFullYear();
    }

    getDayName(date) {
      return date.toLocaleDateString('en-US', { weekday: 'short' });
    }

    getMonthName(month) {
      return new Date(2000, month, 1).toLocaleDateString('en-US', { month: 'long' });
    }

    saveTask(textarea) {
      const date = textarea.getAttribute('data-date');
      const period = textarea.getAttribute('data-period');
      if (!this.tasks[date]) this.tasks[date] = {};
      this.tasks[date][period] = textarea.value;

      // Save to localStorage
      localStorage.setItem('calendarTasks', JSON.stringify(this.tasks));
    }

    getTaskValue(date, period) {
      const dateStr = this.formatDate(date);
      return this.tasks[dateStr]?.[period] || '';
    }

    loadSavedData() {
      // Load tasks
      const savedTasks = localStorage.getItem('calendarTasks');
      if (savedTasks) {
        this.tasks = JSON.parse(savedTasks);
      }

      // Load projects
      const savedProjects = localStorage.getItem('calendarProjects');
      if (savedProjects) {
        this.projects = JSON.parse(savedProjects);
        this.renderProjects();
      }
    }

    navigateWeek(direction) {
      this.currentDate.setDate(this.currentDate.getDate() + (direction * 7));
      this.renderCalendar();
      this.renderMiniCalendar();
    }

    editProject(projectId) {
      const project = this.projects.find(p => p.id === projectId);
      if (project) {
        document.getElementById('projectName').value = project.name;
        document.getElementById('projectDeadline').value = project.deadline;
        document.getElementById('projectContent').value = project.description;
        document.getElementById('modalTitle').textContent = 'Edit Project';
        this.showProjectModal();
      }
    }

    deleteProject(projectId) {
      if (confirm('Are you sure you want to delete this project?')) {
        this.projects = this.projects.filter(p => p.id !== projectId);
        this.renderProjects();
        localStorage.setItem('calendarProjects', JSON.stringify(this.projects));
      }
    }
  }

  function highlightCurrentWeek() {
    const now = new Date();
    const startOfWeek = new Date(now.setDate(now.getDate() - now.getDay()));
    const endOfWeek = new Date(now.setDate(now.getDate() - now.getDay() + 6));

    const rows = document.querySelectorAll('#miniCalendar tbody tr');
    rows.forEach(row => {
      const cells = row.querySelectorAll('td');
      let weekStart, weekEnd;

      cells.forEach(cell => {
        const date = new Date(cell.dataset.date);
        if (!weekStart || date < weekStart) weekStart = date;
        if (!weekEnd || date > weekEnd) weekEnd = date;
      });

      if (weekStart <= endOfWeek && weekEnd >= startOfWeek) {
        row.classList.add('highlight-week');
      } else {
        row.classList.remove('highlight-week');
      }
    });
  }

  // Initialize the calendar app
  const calendar = new CalendarApp();
</script>
</body>
</html>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>